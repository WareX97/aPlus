\hypertarget{pthread__barrier_8c}{\section{usr/src/libpthread/src/pthread\+\_\+barrier.c File Reference}
\label{pthread__barrier_8c}\index{usr/src/libpthread/src/pthread\+\_\+barrier.\+c@{usr/src/libpthread/src/pthread\+\_\+barrier.\+c}}
}
{\ttfamily \#include $<$stdint.\+h$>$}\\*
{\ttfamily \#include $<$sched.\+h$>$}\\*
{\ttfamily \#include $<$time.\+h$>$}\\*
{\ttfamily \#include $<$pthread.\+h$>$}\\*
{\ttfamily \#include \char`\"{}pthread\+\_\+internal.\+h\char`\"{}}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{pthread__internal_8h_ad17d551e31d1828c68acf40684849b7e}{P\+U\+B\+L\+I\+C} int \hyperlink{pthread__barrier_8c_aa71605591924fcd01057ff5e73ddd19e}{pthread\+\_\+barrier\+\_\+init} (\hyperlink{pthread_8h_a0af030d8520cb3271d895b21a5ecca34}{pthread\+\_\+barrier\+\_\+t} $\ast$barrier, const \hyperlink{pthread_8h_a8b994175b42c340d079d21007eaf51c7}{pthread\+\_\+barrierattr\+\_\+t} $\ast$attr, unsigned int count)
\item 
\hyperlink{pthread__internal_8h_ad17d551e31d1828c68acf40684849b7e}{P\+U\+B\+L\+I\+C} int \hyperlink{pthread__barrier_8c_a42a6ff31584d9d5e63bd8cb9dd57a2eb}{pthread\+\_\+barrier\+\_\+destroy} (\hyperlink{pthread_8h_a0af030d8520cb3271d895b21a5ecca34}{pthread\+\_\+barrier\+\_\+t} $\ast$barrier)
\item 
\hyperlink{pthread__internal_8h_ad17d551e31d1828c68acf40684849b7e}{P\+U\+B\+L\+I\+C} int \hyperlink{pthread__barrier_8c_ad61c7efb7bd52899877f3ec8c6895d06}{pthread\+\_\+barrier\+\_\+wait} (\hyperlink{pthread_8h_a0af030d8520cb3271d895b21a5ecca34}{pthread\+\_\+barrier\+\_\+t} $\ast$barrier)
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{pthread__barrier_8c_a42a6ff31584d9d5e63bd8cb9dd57a2eb}{\index{pthread\+\_\+barrier.\+c@{pthread\+\_\+barrier.\+c}!pthread\+\_\+barrier\+\_\+destroy@{pthread\+\_\+barrier\+\_\+destroy}}
\index{pthread\+\_\+barrier\+\_\+destroy@{pthread\+\_\+barrier\+\_\+destroy}!pthread\+\_\+barrier.\+c@{pthread\+\_\+barrier.\+c}}
\subsubsection[{pthread\+\_\+barrier\+\_\+destroy}]{\setlength{\rightskip}{0pt plus 5cm}{\bf P\+U\+B\+L\+I\+C} int pthread\+\_\+barrier\+\_\+destroy (
\begin{DoxyParamCaption}
\item[{{\bf pthread\+\_\+barrier\+\_\+t} $\ast$}]{barrier}
\end{DoxyParamCaption}
)}}\label{pthread__barrier_8c_a42a6ff31584d9d5e63bd8cb9dd57a2eb}


Definition at line 29 of file pthread\+\_\+barrier.\+c.



References pthread\+\_\+barrier\+::curr\+\_\+height, errno, and pthread\+\_\+barrier\+::init\+\_\+height.


\begin{DoxyCode}
29                                                                \{
30     \textcolor{keywordflow}{if}(barrier == NULL) \{
31         \hyperlink{errno_8c_ad65a8842cc674e3ddf69355898c0ecbf}{errno} = EINVAL;
32         \textcolor{keywordflow}{return} -1;
33     \}
34 
35     barrier->\hyperlink{structpthread__barrier_a3b8e6f276f11a62fb77525fe5d11b18c}{curr\_height} = 0;
36     barrier->\hyperlink{structpthread__barrier_a71938bf4346ecc8a2f997f18df267ae0}{init\_height} = 0;
37     
38 
39     \textcolor{keywordflow}{return} 0;
40 \}
\end{DoxyCode}
\hypertarget{pthread__barrier_8c_aa71605591924fcd01057ff5e73ddd19e}{\index{pthread\+\_\+barrier.\+c@{pthread\+\_\+barrier.\+c}!pthread\+\_\+barrier\+\_\+init@{pthread\+\_\+barrier\+\_\+init}}
\index{pthread\+\_\+barrier\+\_\+init@{pthread\+\_\+barrier\+\_\+init}!pthread\+\_\+barrier.\+c@{pthread\+\_\+barrier.\+c}}
\subsubsection[{pthread\+\_\+barrier\+\_\+init}]{\setlength{\rightskip}{0pt plus 5cm}{\bf P\+U\+B\+L\+I\+C} int pthread\+\_\+barrier\+\_\+init (
\begin{DoxyParamCaption}
\item[{{\bf pthread\+\_\+barrier\+\_\+t} $\ast$}]{barrier, }
\item[{const {\bf pthread\+\_\+barrierattr\+\_\+t} $\ast$}]{attr, }
\item[{unsigned int}]{count}
\end{DoxyParamCaption}
)}}\label{pthread__barrier_8c_aa71605591924fcd01057ff5e73ddd19e}


Definition at line 9 of file pthread\+\_\+barrier.\+c.



References pthread\+\_\+barrier\+::curr\+\_\+height, errno, pthread\+\_\+barrier\+::init\+\_\+height, pthread\+\_\+barrier\+::owner, and pthread\+\_\+self().


\begin{DoxyCode}
9                                                                                                            
              \{
10     \textcolor{keywordflow}{if}(barrier == NULL) \{
11         \hyperlink{errno_8c_ad65a8842cc674e3ddf69355898c0ecbf}{errno} = EINVAL;
12         \textcolor{keywordflow}{return} -1;
13     \}
14 
15     \textcolor{keywordflow}{if}(count == 0) \{
16         \hyperlink{errno_8c_ad65a8842cc674e3ddf69355898c0ecbf}{errno} = EINVAL;
17         \textcolor{keywordflow}{return} -1;
18     \}
19 
20     barrier->\hyperlink{structpthread__barrier_a3b8e6f276f11a62fb77525fe5d11b18c}{curr\_height} = 0;
21     barrier->\hyperlink{structpthread__barrier_a71938bf4346ecc8a2f997f18df267ae0}{init\_height} = count;
22     barrier->\hyperlink{structpthread__barrier_a8ec820115bfcd6be50432579aac440fa}{owner} = \hyperlink{pthread_8h_a4c4f5f3b4f8f45d9d897847d53b11aaa}{pthread\_self}();
23     
24 
25     \textcolor{keywordflow}{return} 0;
26 \}
\end{DoxyCode}
\hypertarget{pthread__barrier_8c_ad61c7efb7bd52899877f3ec8c6895d06}{\index{pthread\+\_\+barrier.\+c@{pthread\+\_\+barrier.\+c}!pthread\+\_\+barrier\+\_\+wait@{pthread\+\_\+barrier\+\_\+wait}}
\index{pthread\+\_\+barrier\+\_\+wait@{pthread\+\_\+barrier\+\_\+wait}!pthread\+\_\+barrier.\+c@{pthread\+\_\+barrier.\+c}}
\subsubsection[{pthread\+\_\+barrier\+\_\+wait}]{\setlength{\rightskip}{0pt plus 5cm}{\bf P\+U\+B\+L\+I\+C} int pthread\+\_\+barrier\+\_\+wait (
\begin{DoxyParamCaption}
\item[{{\bf pthread\+\_\+barrier\+\_\+t} $\ast$}]{barrier}
\end{DoxyParamCaption}
)}}\label{pthread__barrier_8c_ad61c7efb7bd52899877f3ec8c6895d06}


Definition at line 43 of file pthread\+\_\+barrier.\+c.



References pthread\+\_\+barrier\+::curr\+\_\+height, errno, pthread\+\_\+barrier\+::init\+\_\+height, pthread\+\_\+barrier\+::owner, P\+T\+H\+R\+E\+A\+D\+\_\+\+B\+A\+R\+R\+I\+E\+R\+\_\+\+S\+E\+R\+I\+A\+L\+\_\+\+T\+H\+R\+E\+A\+D, pthread\+\_\+self(), and sched\+\_\+yield().


\begin{DoxyCode}
43                                                             \{
44     \textcolor{keywordflow}{if}(barrier == NULL) \{
45         \hyperlink{errno_8c_ad65a8842cc674e3ddf69355898c0ecbf}{errno} = EINVAL;
46         \textcolor{keywordflow}{return} -1;
47     \}
48 
49     barrier->\hyperlink{structpthread__barrier_a3b8e6f276f11a62fb77525fe5d11b18c}{curr\_height} += 1;
50 
51     \textcolor{keywordflow}{while}(barrier->\hyperlink{structpthread__barrier_a3b8e6f276f11a62fb77525fe5d11b18c}{curr\_height} < barrier->\hyperlink{structpthread__barrier_a71938bf4346ecc8a2f997f18df267ae0}{init\_height})
52         \hyperlink{nanosleep_8c_a357cd4b34c13011749dfffb42b489f09}{sched\_yield}();
53 
54     \textcolor{keywordflow}{if}(\hyperlink{pthread_8h_a4c4f5f3b4f8f45d9d897847d53b11aaa}{pthread\_self}() == barrier->\hyperlink{structpthread__barrier_a8ec820115bfcd6be50432579aac440fa}{owner})
55         \textcolor{keywordflow}{return} \hyperlink{pthread_8h_a822c63bc662ad86cfb2dcec50edbb42b}{PTHREAD\_BARRIER\_SERIAL\_THREAD};
56 
57     \textcolor{keywordflow}{return} 0;
58 \}
\end{DoxyCode}
