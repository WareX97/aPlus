\hypertarget{fstat_8c}{\section{Riferimenti per il file src/syscall/fstat.c}
\label{fstat_8c}\index{src/syscall/fstat.\+c@{src/syscall/fstat.\+c}}
}
{\ttfamily \#include $<$aplus.\+h$>$}\\*
{\ttfamily \#include $<$aplus/syscall.\+h$>$}\\*
{\ttfamily \#include $<$aplus/fs.\+h$>$}\\*
{\ttfamily \#include $<$aplus/task.\+h$>$}\\*
{\ttfamily \#include $<$unistd.\+h$>$}\\*
{\ttfamily \#include $<$fcntl.\+h$>$}\\*
{\ttfamily \#include $<$errno.\+h$>$}\\*
{\ttfamily \#include $<$sys/stat.\+h$>$}\\*
{\ttfamily \#include $<$dirent.\+h$>$}\\*
\subsection*{Funzioni}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{fstat_8c_a37940479e5cc923a96785a82989b7974}{sys\+\_\+fstat} (int fd, struct stat $\ast$st)
\item 
\hyperlink{fstat_8c_a4d257934d85058e9d4821db299a6544d}{S\+Y\+S\+C\+A\+L\+L} (\hyperlink{fstat_8c_a37940479e5cc923a96785a82989b7974}{sys\+\_\+fstat}, 4)
\end{DoxyCompactItemize}
\subsection*{Variabili}
\begin{DoxyCompactItemize}
\item 
\hyperlink{task_8h_a8aeef2cdb643462b97cd459a8e68cad3}{task\+\_\+t} $\ast$ \hyperlink{fstat_8c_a4743b3673a8794b8e7bd0b6c91a63cd5}{current\+\_\+task}
\end{DoxyCompactItemize}


\subsection{Documentazione delle funzioni}
\hypertarget{fstat_8c_a37940479e5cc923a96785a82989b7974}{\index{fstat.\+c@{fstat.\+c}!sys\+\_\+fstat@{sys\+\_\+fstat}}
\index{sys\+\_\+fstat@{sys\+\_\+fstat}!fstat.\+c@{fstat.\+c}}
\subsubsection[{sys\+\_\+fstat}]{\setlength{\rightskip}{0pt plus 5cm}int sys\+\_\+fstat (
\begin{DoxyParamCaption}
\item[{int}]{fd, }
\item[{struct stat $\ast$}]{st}
\end{DoxyParamCaption}
)}}\label{fstat_8c_a37940479e5cc923a96785a82989b7974}


Definizione alla linea 15 del file fstat.\+c.



Referenzia inode\+::atime, inode\+::ctime, inode\+::dev, errno, task\+::fd, inode\+::gid, inode\+::ino, kprintf, inode\+::mode, inode\+::mtime, inode\+::nlink, inode\+::rdev, inode\+::size, e inode\+::uid.


\begin{DoxyCode}
15                                        \{
16     \textcolor{keywordflow}{if}(!st) \{
17         \hyperlink{errno_8c_ad65a8842cc674e3ddf69355898c0ecbf}{errno} = EINVAL;
18         \textcolor{keywordflow}{return} -1;
19     \}
20 
21     \hyperlink{structinode}{inode\_t}* ino = \hyperlink{fstat_8c_a4743b3673a8794b8e7bd0b6c91a63cd5}{current\_task}->\hyperlink{structtask_afeeb6bafaefe505e6a730dd4e0be5a1a}{fd}[fd];
22     \textcolor{keywordflow}{if}(!ino) \{
23         \hyperlink{aplus_8h_af0b53ac0b8d6868da6396b11b30519c1}{kprintf}(\textcolor{stringliteral}{"sys\_fstat: %s."}, strerror(\hyperlink{errno_8c_ad65a8842cc674e3ddf69355898c0ecbf}{errno}));
24         \hyperlink{errno_8c_ad65a8842cc674e3ddf69355898c0ecbf}{errno} = EBADF;
25         \textcolor{keywordflow}{return} -1;
26     \}
27     
28     st->st\_mode = ino->\hyperlink{structinode_a4902d9f6a1d7bd79c6f1bb73d83ce8e3}{mode};
29     st->st\_ino = ino->\hyperlink{structinode_a1a77be0f24a6c9a18bbdbcecfb75df7c}{ino};
30     st->st\_dev = ino->\hyperlink{structinode_a127a2eb030df332fa64a81188731ad6b}{dev};
31     st->st\_uid = ino->\hyperlink{structinode_a0eac94e96ded19029e871d5cce815bcb}{uid};
32     st->st\_gid = ino->\hyperlink{structinode_a8434fb9dd05057d00b37ed713713835d}{gid};
33     st->st\_atime = ino->\hyperlink{structinode_a7e52661a115f6def97778566f2be0d80}{atime};
34     st->st\_ctime = ino->\hyperlink{structinode_a27334a9d3c25fbac1c134ed5b9cbc566}{ctime};
35     st->st\_mtime = ino->\hyperlink{structinode_a19f0d407fa2962c942e406d3e00c1da4}{mtime};
36     st->st\_nlink = ino->\hyperlink{structinode_a1daedc820c86b5af32f0a137419f7a8f}{nlink};
37     st->st\_size = ino->\hyperlink{structinode_a53722b1b60b7136ce0204b66527bb400}{size};
38     st->st\_rdev = ino->\hyperlink{structinode_a3e7613383954ff7b5faf7c2188e1f61b}{rdev};
39     st->st\_blksize = 512;
40     st->st\_blocks = st->st\_size / st->st\_blksize;
41     
42     \textcolor{keywordflow}{return} 0;
43 \}
\end{DoxyCode}
\hypertarget{fstat_8c_a4d257934d85058e9d4821db299a6544d}{\index{fstat.\+c@{fstat.\+c}!S\+Y\+S\+C\+A\+L\+L@{S\+Y\+S\+C\+A\+L\+L}}
\index{S\+Y\+S\+C\+A\+L\+L@{S\+Y\+S\+C\+A\+L\+L}!fstat.\+c@{fstat.\+c}}
\subsubsection[{S\+Y\+S\+C\+A\+L\+L}]{\setlength{\rightskip}{0pt plus 5cm}S\+Y\+S\+C\+A\+L\+L (
\begin{DoxyParamCaption}
\item[{{\bf sys\+\_\+fstat}}]{, }
\item[{4}]{}
\end{DoxyParamCaption}
)}}\label{fstat_8c_a4d257934d85058e9d4821db299a6544d}


\subsection{Documentazione delle variabili}
\hypertarget{fstat_8c_a4743b3673a8794b8e7bd0b6c91a63cd5}{\index{fstat.\+c@{fstat.\+c}!current\+\_\+task@{current\+\_\+task}}
\index{current\+\_\+task@{current\+\_\+task}!fstat.\+c@{fstat.\+c}}
\subsubsection[{current\+\_\+task}]{\setlength{\rightskip}{0pt plus 5cm}{\bf task\+\_\+t}$\ast$ current\+\_\+task}}\label{fstat_8c_a4743b3673a8794b8e7bd0b6c91a63cd5}


Definizione alla linea 33 del file sched.\+c.

