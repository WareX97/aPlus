\hypertarget{serial_8c}{\section{src/arch/serial.c File Reference}
\label{serial_8c}\index{src/arch/serial.\+c@{src/arch/serial.\+c}}
}
{\ttfamily \#include $<$aplus.\+h$>$}\\*
{\ttfamily \#include $<$aplus/spinlock.\+h$>$}\\*
{\ttfamily \#include $<$stdint.\+h$>$}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{serial_8c_a554c0b79338d298c39a06027b790edb5}{serial\+\_\+send} (\hyperlink{aplus_8h_ae0430369c5a35dcdbc0bc19dcbb33a03}{uint8\+\_\+t} port, \hyperlink{aplus_8h_ae0430369c5a35dcdbc0bc19dcbb33a03}{uint8\+\_\+t} \hyperlink{attribute_8h_ae7f66047e6e39ba2bb6af8b95f00d1dd}{value})
\item 
\hyperlink{aplus_8h_ae0430369c5a35dcdbc0bc19dcbb33a03}{uint8\+\_\+t} \hyperlink{serial_8c_abfa1d9231846e7f9820b4609e32f8f7c}{serial\+\_\+recv} (\hyperlink{aplus_8h_ae0430369c5a35dcdbc0bc19dcbb33a03}{uint8\+\_\+t} port)
\item 
int \hyperlink{serial_8c_a459999cfa35c788b64284953a93c4b57}{serial\+\_\+init} ()
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{aplus_8h_a5a8b2dc9e45a9ee81a94ef304fb62505}{uint16\+\_\+t} \hyperlink{serial_8c_aaad9ee4d2adfe35b53820a6ac8b5636d}{serial} \mbox{[}$\,$\mbox{]}
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{serial_8c_a459999cfa35c788b64284953a93c4b57}{\index{serial.\+c@{serial.\+c}!serial\+\_\+init@{serial\+\_\+init}}
\index{serial\+\_\+init@{serial\+\_\+init}!serial.\+c@{serial.\+c}}
\subsubsection[{serial\+\_\+init}]{\setlength{\rightskip}{0pt plus 5cm}int serial\+\_\+init (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{serial_8c_a459999cfa35c788b64284953a93c4b57}


Definition at line 22 of file serial.\+c.



References serial.


\begin{DoxyCode}
22                   \{
23     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < \textcolor{keyword}{sizeof}(\hyperlink{serial_8c_aaad9ee4d2adfe35b53820a6ac8b5636d}{serial}); i++) \{
24         outb(\hyperlink{serial_8c_aaad9ee4d2adfe35b53820a6ac8b5636d}{serial}[i] + 1, 0x00);
25         outb(\hyperlink{serial_8c_aaad9ee4d2adfe35b53820a6ac8b5636d}{serial}[i] + 3, 0x80);
26         outb(\hyperlink{serial_8c_aaad9ee4d2adfe35b53820a6ac8b5636d}{serial}[i] + 0, 0x03);
27         outb(\hyperlink{serial_8c_aaad9ee4d2adfe35b53820a6ac8b5636d}{serial}[i] + 1, 0x00);
28         outb(\hyperlink{serial_8c_aaad9ee4d2adfe35b53820a6ac8b5636d}{serial}[i] + 3, 0x03);
29         outb(\hyperlink{serial_8c_aaad9ee4d2adfe35b53820a6ac8b5636d}{serial}[i] + 2, 0xC7);
30         outb(\hyperlink{serial_8c_aaad9ee4d2adfe35b53820a6ac8b5636d}{serial}[i] + 4, 0x0B);
31     \}
32 
33     \textcolor{keywordflow}{return} 0;
34 \}
\end{DoxyCode}
\hypertarget{serial_8c_abfa1d9231846e7f9820b4609e32f8f7c}{\index{serial.\+c@{serial.\+c}!serial\+\_\+recv@{serial\+\_\+recv}}
\index{serial\+\_\+recv@{serial\+\_\+recv}!serial.\+c@{serial.\+c}}
\subsubsection[{serial\+\_\+recv}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint8\+\_\+t} serial\+\_\+recv (
\begin{DoxyParamCaption}
\item[{{\bf uint8\+\_\+t}}]{port}
\end{DoxyParamCaption}
)}}\label{serial_8c_abfa1d9231846e7f9820b4609e32f8f7c}


Definition at line 16 of file serial.\+c.



References fastlock\+\_\+waiton, and serial.


\begin{DoxyCode}
16                                   \{
17     \hyperlink{spinlock_8h_a34b538b8c053bec1d149f9a4258aca89}{fastlock\_waiton}((inb(\hyperlink{serial_8c_aaad9ee4d2adfe35b53820a6ac8b5636d}{serial}[port] + 5) & 1) == 0);
18     
19     \textcolor{keywordflow}{return} inb(\hyperlink{serial_8c_aaad9ee4d2adfe35b53820a6ac8b5636d}{serial}[port]);
20 \}
\end{DoxyCode}
\hypertarget{serial_8c_a554c0b79338d298c39a06027b790edb5}{\index{serial.\+c@{serial.\+c}!serial\+\_\+send@{serial\+\_\+send}}
\index{serial\+\_\+send@{serial\+\_\+send}!serial.\+c@{serial.\+c}}
\subsubsection[{serial\+\_\+send}]{\setlength{\rightskip}{0pt plus 5cm}void serial\+\_\+send (
\begin{DoxyParamCaption}
\item[{{\bf uint8\+\_\+t}}]{port, }
\item[{{\bf uint8\+\_\+t}}]{value}
\end{DoxyParamCaption}
)}}\label{serial_8c_a554c0b79338d298c39a06027b790edb5}


Definition at line 11 of file serial.\+c.



References fastlock\+\_\+waiton, and serial.


\begin{DoxyCode}
11                                               \{
12     \hyperlink{spinlock_8h_a34b538b8c053bec1d149f9a4258aca89}{fastlock\_waiton}(((inb(\hyperlink{serial_8c_aaad9ee4d2adfe35b53820a6ac8b5636d}{serial}[port] + 5) & 32) == 0));
13     outb(\hyperlink{serial_8c_aaad9ee4d2adfe35b53820a6ac8b5636d}{serial}[port], \hyperlink{attribute_8h_ae7f66047e6e39ba2bb6af8b95f00d1dd}{value});
14 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\hypertarget{serial_8c_aaad9ee4d2adfe35b53820a6ac8b5636d}{\index{serial.\+c@{serial.\+c}!serial@{serial}}
\index{serial@{serial}!serial.\+c@{serial.\+c}}
\subsubsection[{serial}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint16\+\_\+t} serial\mbox{[}$\,$\mbox{]}\hspace{0.3cm}{\ttfamily [static]}}}\label{serial_8c_aaad9ee4d2adfe35b53820a6ac8b5636d}
{\bfseries Initial value\+:}
\begin{DoxyCode}
= \{
    0x3F8, 0x2F8, 0x3E8, 0x2E8
\}
\end{DoxyCode}


Definition at line 7 of file serial.\+c.

