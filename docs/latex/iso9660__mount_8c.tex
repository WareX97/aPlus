\hypertarget{iso9660__mount_8c}{\section{src/fs/iso9660/iso9660\+\_\+mount.c File Reference}
\label{iso9660__mount_8c}\index{src/fs/iso9660/iso9660\+\_\+mount.\+c@{src/fs/iso9660/iso9660\+\_\+mount.\+c}}
}
{\ttfamily \#include $<$aplus.\+h$>$}\\*
{\ttfamily \#include $<$aplus/fs.\+h$>$}\\*
{\ttfamily \#include $<$aplus/task.\+h$>$}\\*
{\ttfamily \#include $<$aplus/spinlock.\+h$>$}\\*
{\ttfamily \#include $<$aplus/fsys.\+h$>$}\\*
{\ttfamily \#include $<$stdint.\+h$>$}\\*
{\ttfamily \#include $<$string.\+h$>$}\\*
{\ttfamily \#include $<$unistd.\+h$>$}\\*
{\ttfamily \#include $<$dirent.\+h$>$}\\*
{\ttfamily \#include $<$fcntl.\+h$>$}\\*
{\ttfamily \#include $<$sys/types.\+h$>$}\\*
{\ttfamily \#include \char`\"{}iso9660.\+h\char`\"{}}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structdirent}{dirent} $\ast$ \hyperlink{iso9660__mount_8c_a7863db87f2e6fa050ede770aebcf1087}{iso9660\+\_\+readdir} (\hyperlink{fs_8h_a48b686d0c4375b0d1aab2296dc36c7a6}{inode\+\_\+t} $\ast$, int)
\item 
\hyperlink{fs_8h_a48b686d0c4375b0d1aab2296dc36c7a6}{inode\+\_\+t} $\ast$ \hyperlink{iso9660__mount_8c_a4ba1d5bbcb2768b873eb11c7e210879f}{iso9660\+\_\+finddir} (\hyperlink{fs_8h_a48b686d0c4375b0d1aab2296dc36c7a6}{inode\+\_\+t} $\ast$, char $\ast$)
\item 
int \hyperlink{iso9660__mount_8c_a6b30eb9e62fe1078919d0a49849fa94c}{iso9660\+\_\+mount} (\hyperlink{fs_8h_a48b686d0c4375b0d1aab2296dc36c7a6}{inode\+\_\+t} $\ast$dev, \hyperlink{fs_8h_a48b686d0c4375b0d1aab2296dc36c7a6}{inode\+\_\+t} $\ast$ino, int \hyperlink{iso9660_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags})
\item 
\hyperlink{iso9660__mount_8c_a8d23c05e41bb9d46b9a5c94e13cf11fa}{F\+S\+Y\+S} (iso9660, \hyperlink{iso9660__mount_8c_a6b30eb9e62fe1078919d0a49849fa94c}{iso9660\+\_\+mount})
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{iso9660__mount_8c_a8d23c05e41bb9d46b9a5c94e13cf11fa}{\index{iso9660\+\_\+mount.\+c@{iso9660\+\_\+mount.\+c}!F\+S\+Y\+S@{F\+S\+Y\+S}}
\index{F\+S\+Y\+S@{F\+S\+Y\+S}!iso9660\+\_\+mount.\+c@{iso9660\+\_\+mount.\+c}}
\subsubsection[{F\+S\+Y\+S}]{\setlength{\rightskip}{0pt plus 5cm}F\+S\+Y\+S (
\begin{DoxyParamCaption}
\item[{iso9660}]{, }
\item[{{\bf iso9660\+\_\+mount}}]{}
\end{DoxyParamCaption}
)}}\label{iso9660__mount_8c_a8d23c05e41bb9d46b9a5c94e13cf11fa}
\hypertarget{iso9660__mount_8c_a4ba1d5bbcb2768b873eb11c7e210879f}{\index{iso9660\+\_\+mount.\+c@{iso9660\+\_\+mount.\+c}!iso9660\+\_\+finddir@{iso9660\+\_\+finddir}}
\index{iso9660\+\_\+finddir@{iso9660\+\_\+finddir}!iso9660\+\_\+mount.\+c@{iso9660\+\_\+mount.\+c}}
\subsubsection[{iso9660\+\_\+finddir}]{\setlength{\rightskip}{0pt plus 5cm}{\bf inode\+\_\+t}$\ast$ iso9660\+\_\+finddir (
\begin{DoxyParamCaption}
\item[{{\bf inode\+\_\+t} $\ast$}]{, }
\item[{char $\ast$}]{}
\end{DoxyParamCaption}
)}}\label{iso9660__mount_8c_a4ba1d5bbcb2768b873eb11c7e210879f}


Definition at line 21 of file iso9660\+\_\+finddir.\+c.



References inode\+::atime, inode\+::chown, inode\+::creat, inode\+::ctime, inode\+::dev, devfs\+\_\+getdevice(), inode\+::finddir, inode\+::flush, fs\+\_\+read(), inode\+::gid, inode\+::ino, inode\+::ioctl, iso9660\+\_\+checkname(), iso9660\+\_\+finddir(), I\+S\+O9660\+\_\+\+F\+L\+A\+G\+S\+\_\+\+D\+I\+R\+E\+C\+T\+O\+R\+Y, iso9660\+\_\+getlsb32(), iso9660\+\_\+read(), iso9660\+\_\+readdir(), I\+S\+O9660\+\_\+\+S\+E\+C\+T\+O\+R\+\_\+\+S\+I\+Z\+E, kfree(), kmalloc(), inode\+::link, inode\+::mode, inode\+::mtime, inode\+::name, inode\+::nlink, inode\+::parent, inode\+::position, inode\+::rdev, inode\+::read, inode\+::readdir, inode\+::rename, inode\+::size, sys\+\_\+time(), inode\+::uid, uint32\+\_\+t, inode\+::unlink, inode\+::userdata, and inode\+::write.


\begin{DoxyCode}
21                                                    \{
22     \textcolor{keywordflow}{if}(!ino)
23         \textcolor{keywordflow}{return} NULL;
24         
25     \textcolor{keywordflow}{if}(!ino->dev)
26         \textcolor{keywordflow}{return} NULL;
27 
28     \textcolor{keywordflow}{if}(!ino->userdata)
29         \textcolor{keywordflow}{return} NULL;
30 
31     \textcolor{keywordflow}{if}(!\hyperlink{attribute_8h_aae08e5b919f01beb6c69d2859e0dfc27}{name} || strlen(\hyperlink{attribute_8h_aae08e5b919f01beb6c69d2859e0dfc27}{name}) == 0)
32         \textcolor{keywordflow}{return} NULL;
33 
34 
35     \hyperlink{structinode}{inode\_t}* dev = (\hyperlink{structinode}{inode\_t}*) \hyperlink{devfs_8c_a226c953aff43f9b1e9736908bb6802f3}{devfs\_getdevice}(ino->dev);
36     \textcolor{keywordflow}{if}(!dev)
37         \textcolor{keywordflow}{return} NULL;
38 
39     iso9660\_dir\_t* dir = (iso9660\_dir\_t*) ino->\hyperlink{structinode_a8ba627a7ebbacc723e8452fbf8dd3670}{userdata};
40     iso9660\_dir\_t* nodes = (iso9660\_dir\_t*) \hyperlink{mm_8h_a1f5d4240b2decc62c0e6eae06c72916c}{kmalloc}(\hyperlink{iso9660_8c_a0e3f94f923e7f615525349cee099f701}{iso9660\_getlsb32}(dir->length));
41     iso9660\_dir\_t* snodes = nodes;
42 
43 
44     dev->\hyperlink{structinode_a5756f61233e40d01652094d29b5daf6c}{position} = \hyperlink{iso9660_8c_a0e3f94f923e7f615525349cee099f701}{iso9660\_getlsb32}(dir->lba) * 
      \hyperlink{iso9660_8h_a00bbe26a634a966bc30429348a713ede}{ISO9660\_SECTOR\_SIZE};
45     \textcolor{keywordflow}{if}(\hyperlink{fs_8c_a8e53a98b93e6b136196b2ebd99e43dcd}{fs\_read}(dev, nodes, \hyperlink{iso9660_8c_a0e3f94f923e7f615525349cee099f701}{iso9660\_getlsb32}(dir->length)) != 
      \hyperlink{iso9660_8c_a0e3f94f923e7f615525349cee099f701}{iso9660\_getlsb32}(dir->length)) \{
46         \hyperlink{mm_8h_acee1960bdb3a19cb495341ec725cafef}{kfree}(nodes);
47         \textcolor{keywordflow}{return} NULL;
48     \}
49 
50     \textcolor{keywordflow}{for}(;;) \{
51         \textcolor{keywordflow}{if}(nodes->size == 0) \{
52             \hyperlink{mm_8h_acee1960bdb3a19cb495341ec725cafef}{kfree}(snodes);
53             \textcolor{keywordflow}{return} 0;
54         \}
55 
56         \textcolor{keywordtype}{char}* nodename = (\textcolor{keywordtype}{char}*) \hyperlink{mm_8h_a1f5d4240b2decc62c0e6eae06c72916c}{kmalloc}(nodes->idlen);
57         memset(nodename, 0, nodes->idlen);
58 
59         strncpy(nodename, nodes->reserved, nodes->idlen);
60         \hyperlink{iso9660_8c_a42e767e05480219cfb4878964b4f0192}{iso9660\_checkname}(nodename);
61 
62 
63         \textcolor{keywordflow}{if}(strcmp(nodename, \hyperlink{attribute_8h_aae08e5b919f01beb6c69d2859e0dfc27}{name}) == 0)
64             \textcolor{keywordflow}{break};
65 
66         \hyperlink{mm_8h_acee1960bdb3a19cb495341ec725cafef}{kfree}(nodename);
67         nodes = (iso9660\_dir\_t*) ((\hyperlink{aplus_8h_a53a0df51603c77c2aa5b9ea61b606a82}{uint32\_t}) nodes + nodes->size);
68     \}
69 
70 
71     \hyperlink{structinode}{inode\_t}* f = (\hyperlink{structinode}{inode\_t}*) \hyperlink{mm_8h_a1f5d4240b2decc62c0e6eae06c72916c}{kmalloc}(\textcolor{keyword}{sizeof}(\hyperlink{structinode}{inode\_t}));
72     memset(f, 0, \textcolor{keyword}{sizeof}(\hyperlink{structinode}{inode\_t}));
73 
74     strcpy(f->\hyperlink{structinode_ad64802d9d4ebdd1c56af5ab6e302faf0}{name}, \hyperlink{attribute_8h_aae08e5b919f01beb6c69d2859e0dfc27}{name});
75     
76     f->\hyperlink{structinode_a127a2eb030df332fa64a81188731ad6b}{dev} = ino->dev;
77     f->\hyperlink{structinode_a1a77be0f24a6c9a18bbdbcecfb75df7c}{ino} = 0;
78     f->\hyperlink{structinode_a1daedc820c86b5af32f0a137419f7a8f}{nlink} = 0;
79     f->\hyperlink{structinode_a0eac94e96ded19029e871d5cce815bcb}{uid} = ino->uid;
80     f->\hyperlink{structinode_a8434fb9dd05057d00b37ed713713835d}{gid} = ino->gid;
81     f->\hyperlink{structinode_a3e7613383954ff7b5faf7c2188e1f61b}{rdev} = ino->rdev;
82     f->\hyperlink{structinode_a53722b1b60b7136ce0204b66527bb400}{size} = (size\_t) \hyperlink{iso9660_8c_a0e3f94f923e7f615525349cee099f701}{iso9660\_getlsb32}(nodes->length);
83     f->\hyperlink{structinode_a7e52661a115f6def97778566f2be0d80}{atime} = f->\hyperlink{structinode_a27334a9d3c25fbac1c134ed5b9cbc566}{ctime} = f->\hyperlink{structinode_a19f0d407fa2962c942e406d3e00c1da4}{mtime} = \hyperlink{time_8c_a4b6eba92722ec1e5446f676e95e4cddf}{sys\_time}(NULL);
84     f->\hyperlink{structinode_a2d4fac4ae14332628e6fa2bd55dd3121}{parent} = ino;
85     f->\hyperlink{structinode_a3533c53c5391601c66b3ae0f389c0843}{link} = NULL;
86     
87     \textcolor{keywordflow}{if}(nodes->flags & \hyperlink{iso9660_8h_a3a1a377e9111d5e7b6a9f668943281b0}{ISO9660\_FLAGS\_DIRECTORY}) \{
88         f->\hyperlink{structinode_a0a54c11571f19f23322f3e6ad3ecb113}{readdir} = \hyperlink{iso9660__finddir_8c_a7863db87f2e6fa050ede770aebcf1087}{iso9660\_readdir};
89         f->\hyperlink{structinode_ab6c5e2d912fdbd506086e53185cd370d}{finddir} = \hyperlink{iso9660__finddir_8c_ab5b5a339d80506e680848ffdae68d5ee}{iso9660\_finddir};
90         f->\hyperlink{structinode_a4902d9f6a1d7bd79c6f1bb73d83ce8e3}{mode} = S\_IFDIR;
91 
92         iso9660\_dir\_t* entry = (iso9660\_dir\_t*) \hyperlink{mm_8h_a1f5d4240b2decc62c0e6eae06c72916c}{kmalloc}(
      \hyperlink{iso9660_8h_a00bbe26a634a966bc30429348a713ede}{ISO9660\_SECTOR\_SIZE});
93         memset(entry, 0, \hyperlink{iso9660_8h_a00bbe26a634a966bc30429348a713ede}{ISO9660\_SECTOR\_SIZE});
94 
95         dev->\hyperlink{structinode_a5756f61233e40d01652094d29b5daf6c}{position} = \hyperlink{iso9660_8c_a0e3f94f923e7f615525349cee099f701}{iso9660\_getlsb32}(nodes->lba) * 
      \hyperlink{iso9660_8h_a00bbe26a634a966bc30429348a713ede}{ISO9660\_SECTOR\_SIZE};
96         \hyperlink{fs_8c_a8e53a98b93e6b136196b2ebd99e43dcd}{fs\_read}(dev, entry, \hyperlink{iso9660_8h_a00bbe26a634a966bc30429348a713ede}{ISO9660\_SECTOR\_SIZE});
97 
98         f->\hyperlink{structinode_a8ba627a7ebbacc723e8452fbf8dd3670}{userdata} = (\textcolor{keywordtype}{void}*) entry;
99     \} \textcolor{keywordflow}{else} \{
100         f->\hyperlink{structinode_ae2c5e8a0a372334b97024fbd9ef694c1}{read} = \hyperlink{iso9660__finddir_8c_a2bb6ca6da6e6172eca945f7367e63d56}{iso9660\_read};
101         f->\hyperlink{structinode_a53a123d38834fa17e7ef5c1e5f47bba2}{write} = NULL;   \textcolor{comment}{/* Read Only */}
102 
103         f->\hyperlink{structinode_a4902d9f6a1d7bd79c6f1bb73d83ce8e3}{mode} = S\_IFREG;
104         f->\hyperlink{structinode_a8ba627a7ebbacc723e8452fbf8dd3670}{userdata} = (\textcolor{keywordtype}{void}*) (\hyperlink{iso9660_8c_a0e3f94f923e7f615525349cee099f701}{iso9660\_getlsb32}(nodes->lba) * 
      \hyperlink{iso9660_8h_a00bbe26a634a966bc30429348a713ede}{ISO9660\_SECTOR\_SIZE});
105     \}
106 
107 
108 
109     f->\hyperlink{structinode_ad622a049b34780786d9ba4311b06b3b4}{creat} = NULL;
110     f->\hyperlink{structinode_a5a309a9c4ada7e4d062162b06125a929}{rename} = NULL;
111     f->\hyperlink{structinode_adf65bac80736631b8000d3d34e953aaa}{unlink} = NULL;
112     f->\hyperlink{structinode_a8221183a697c9f2b4e0e295f5a9d8afd}{chown} = NULL;
113     f->\hyperlink{structinode_ae2972ef183f5c39aac7cb83b9f8a04a8}{flush} = NULL;
114     f->\hyperlink{structinode_a636843da203574bc338b016758bf8c7e}{ioctl} = NULL;
115 
116     
117     \hyperlink{mm_8h_acee1960bdb3a19cb495341ec725cafef}{kfree}(snodes);
118     \textcolor{keywordflow}{return} f;
119 \}
\end{DoxyCode}
\hypertarget{iso9660__mount_8c_a6b30eb9e62fe1078919d0a49849fa94c}{\index{iso9660\+\_\+mount.\+c@{iso9660\+\_\+mount.\+c}!iso9660\+\_\+mount@{iso9660\+\_\+mount}}
\index{iso9660\+\_\+mount@{iso9660\+\_\+mount}!iso9660\+\_\+mount.\+c@{iso9660\+\_\+mount.\+c}}
\subsubsection[{iso9660\+\_\+mount}]{\setlength{\rightskip}{0pt plus 5cm}int iso9660\+\_\+mount (
\begin{DoxyParamCaption}
\item[{{\bf inode\+\_\+t} $\ast$}]{dev, }
\item[{{\bf inode\+\_\+t} $\ast$}]{ino, }
\item[{int}]{flags}
\end{DoxyParamCaption}
)}}\label{iso9660__mount_8c_a6b30eb9e62fe1078919d0a49849fa94c}


Definition at line 20 of file iso9660\+\_\+mount.\+c.



References inode\+::finddir, iso9660\+\_\+check(), iso9660\+\_\+finddir(), iso9660\+\_\+getroot(), iso9660\+\_\+readdir(), kprintf(), inode\+::name, inode\+::readdir, and inode\+::userdata.


\begin{DoxyCode}
20                                                          \{
21     \textcolor{keywordflow}{if}(!dev)
22         \textcolor{keywordflow}{return} -1;
23         
24     \textcolor{keywordflow}{if}(!ino)
25         \textcolor{keywordflow}{return} -1;
26     
27     \textcolor{keywordflow}{if}(\hyperlink{iso9660_8c_a0b0848072ac5dcd6aa6eb1c854a10100}{iso9660\_check}(dev) != 0) \{
28         \hyperlink{debug_8c_ac9d768b4772cc87fc88afbbbd805f96a}{kprintf}(\textcolor{stringliteral}{"iso9660: (%s) check failed\(\backslash\)n"}, dev->\hyperlink{structinode_ad64802d9d4ebdd1c56af5ab6e302faf0}{name});
29         \textcolor{keywordflow}{return} -1;
30     \}
31 
32     ino->\hyperlink{structinode_a8ba627a7ebbacc723e8452fbf8dd3670}{userdata} = (\textcolor{keywordtype}{void}*) \hyperlink{iso9660_8c_a905578f1c9b133346ef276f7bfb4c09b}{iso9660\_getroot}();
33     ino->\hyperlink{structinode_a0a54c11571f19f23322f3e6ad3ecb113}{readdir} = \hyperlink{iso9660__mount_8c_a7863db87f2e6fa050ede770aebcf1087}{iso9660\_readdir};
34     ino->\hyperlink{structinode_ab6c5e2d912fdbd506086e53185cd370d}{finddir} = \hyperlink{iso9660__mount_8c_a4ba1d5bbcb2768b873eb11c7e210879f}{iso9660\_finddir};
35 
36     
37     \textcolor{keywordflow}{return} 0;
38 \}
\end{DoxyCode}
\hypertarget{iso9660__mount_8c_a7863db87f2e6fa050ede770aebcf1087}{\index{iso9660\+\_\+mount.\+c@{iso9660\+\_\+mount.\+c}!iso9660\+\_\+readdir@{iso9660\+\_\+readdir}}
\index{iso9660\+\_\+readdir@{iso9660\+\_\+readdir}!iso9660\+\_\+mount.\+c@{iso9660\+\_\+mount.\+c}}
\subsubsection[{iso9660\+\_\+readdir}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf dirent}$\ast$ iso9660\+\_\+readdir (
\begin{DoxyParamCaption}
\item[{{\bf inode\+\_\+t} $\ast$}]{, }
\item[{int}]{}
\end{DoxyParamCaption}
)}}\label{iso9660__mount_8c_a7863db87f2e6fa050ede770aebcf1087}


Definition at line 16 of file iso9660\+\_\+readdir.\+c.



References dirent\+::d\+\_\+ino, dirent\+::d\+\_\+name, inode\+::dev, devfs\+\_\+getdevice(), fs\+\_\+read(), iso9660\+\_\+checkname(), iso9660\+\_\+getlsb32(), I\+S\+O9660\+\_\+\+S\+E\+C\+T\+O\+R\+\_\+\+S\+I\+Z\+E, kfree(), kmalloc(), inode\+::position, uint32\+\_\+t, and inode\+::userdata.


\begin{DoxyCode}
16                                                         \{
17     \textcolor{keywordflow}{if}(!ino)
18         \textcolor{keywordflow}{return} NULL;
19         
20     \textcolor{keywordflow}{if}(!ino->dev)
21         \textcolor{keywordflow}{return} NULL;
22 
23     \textcolor{keywordflow}{if}(!ino->userdata)
24         \textcolor{keywordflow}{return} NULL;
25 
26     \hyperlink{structinode}{inode\_t}* dev = (\hyperlink{structinode}{inode\_t}*) \hyperlink{devfs_8c_a226c953aff43f9b1e9736908bb6802f3}{devfs\_getdevice}(ino->dev);
27     \textcolor{keywordflow}{if}(!dev)
28         \textcolor{keywordflow}{return} NULL;
29 
30     iso9660\_dir\_t* dir = (iso9660\_dir\_t*) ino->\hyperlink{structinode_a8ba627a7ebbacc723e8452fbf8dd3670}{userdata};
31     iso9660\_dir\_t* nodes = (iso9660\_dir\_t*) \hyperlink{mm_8h_a1f5d4240b2decc62c0e6eae06c72916c}{kmalloc}(\hyperlink{iso9660_8c_a0e3f94f923e7f615525349cee099f701}{iso9660\_getlsb32}(dir->length));
32     iso9660\_dir\_t* snodes = nodes;
33 
34     dev->\hyperlink{structinode_a5756f61233e40d01652094d29b5daf6c}{position} = \hyperlink{iso9660_8c_a0e3f94f923e7f615525349cee099f701}{iso9660\_getlsb32}(dir->lba) * 
      \hyperlink{iso9660_8h_a00bbe26a634a966bc30429348a713ede}{ISO9660\_SECTOR\_SIZE};
35     \textcolor{keywordflow}{if}(\hyperlink{fs_8c_a8e53a98b93e6b136196b2ebd99e43dcd}{fs\_read}(dev, nodes, \hyperlink{iso9660_8c_a0e3f94f923e7f615525349cee099f701}{iso9660\_getlsb32}(dir->length)) != 
      \hyperlink{iso9660_8c_a0e3f94f923e7f615525349cee099f701}{iso9660\_getlsb32}(dir->length)) \{
36         \hyperlink{mm_8h_acee1960bdb3a19cb495341ec725cafef}{kfree}(nodes);
37         \textcolor{keywordflow}{return} NULL;
38     \}
39 
40     \textcolor{comment}{/* Skip dots (".", "..") */}
41     nodes = (iso9660\_dir\_t*) ((\hyperlink{aplus_8h_a53a0df51603c77c2aa5b9ea61b606a82}{uint32\_t}) nodes + nodes->size);
42     nodes = (iso9660\_dir\_t*) ((\hyperlink{aplus_8h_a53a0df51603c77c2aa5b9ea61b606a82}{uint32\_t}) nodes + nodes->size);
43 
44     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < index; i++) \{        
45         \textcolor{keywordflow}{if}(nodes->size == 0) \{      
46             \hyperlink{mm_8h_acee1960bdb3a19cb495341ec725cafef}{kfree}(snodes);
47             \textcolor{keywordflow}{return} NULL;
48         \}
49         
50         nodes = (iso9660\_dir\_t*) ((\hyperlink{aplus_8h_a53a0df51603c77c2aa5b9ea61b606a82}{uint32\_t}) nodes + nodes->size);
51     \}
52 
53 
54     \textcolor{keywordflow}{if}(nodes->size == 0) \{
55         \hyperlink{mm_8h_acee1960bdb3a19cb495341ec725cafef}{kfree}(snodes);
56         \textcolor{keywordflow}{return} NULL;
57     \}
58 
59     \textcolor{keyword}{struct }\hyperlink{structdirent}{dirent}* ent = (\textcolor{keyword}{struct }\hyperlink{structdirent}{dirent}*) \hyperlink{mm_8h_a1f5d4240b2decc62c0e6eae06c72916c}{kmalloc}(\textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} 
      \hyperlink{structdirent}{dirent}));
60     memset(ent, 0, \textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} \hyperlink{structdirent}{dirent}));
61     
62     strncpy(ent->\hyperlink{structdirent_a39a9af609c1808f0bdf90155bd3f55ed}{d\_name}, nodes->reserved, nodes->idlen);  
63     \hyperlink{iso9660_8c_a42e767e05480219cfb4878964b4f0192}{iso9660\_checkname}(ent->\hyperlink{structdirent_a39a9af609c1808f0bdf90155bd3f55ed}{d\_name});
64 
65     ent->\hyperlink{structdirent_aef01e92a29cba347e6e6a5f22d4908a2}{d\_ino} = 0;
66 
67     \hyperlink{mm_8h_acee1960bdb3a19cb495341ec725cafef}{kfree}(snodes);
68     \textcolor{keywordflow}{return} ent;
69 \}
\end{DoxyCode}
